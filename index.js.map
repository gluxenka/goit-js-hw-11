{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["const searchKey = '47095841-45755c038ed861ac306bdd605';\nconst defaultImageType = 'photo';\nconst defaultOrientation = 'horizontal';\nconst enableSafeSearch = true;\n\nconst baseApiUrl = `https://pixabay.com/api/`;\n\nexport function getPictures(query) {\n  const search = getSearchParams(query).toString();\n  const url = `${baseApiUrl}?${search}`;\n\n  return fetch(url)\n    .then(response => response.json())\n    .then(responseBody => responseBody?.hits ?? []);\n}\n\nfunction getSearchParams(query) {\n  return new URLSearchParams({\n    q: query,\n    key: searchKey,\n    image_type: defaultImageType,\n    orientation: defaultOrientation,\n    safesearch: enableSafeSearch,\n  });\n}\n","const galleryContainer = document.querySelector('.gallery');\n\nconst imageDetails = [\n  { label: 'Likes', field: 'likes' },\n  { label: 'Views', field: 'views' },\n  { label: 'Comments', field: 'comments' },\n  { label: 'Downloads', field: 'downloads' },\n];\n\nexport function setLoadingText(loadingText) {\n  galleryContainer.innerHTML = loadingText;\n}\n\nexport function renderGalleryItems(pictureItems) {\n  console.log(pictureItems);\n  galleryContainer.innerHTML = pictureItems.map(renderPictureItem).join('');\n}\n\nfunction renderPictureItem(pictureItem) {\n  const previewUrl = pictureItem.previewURL;\n  const largeImageURL = pictureItem.largeImageURL;\n  const alt = pictureItem.tags;\n  return `\n    <a class=\"gallery-item\" href=\"${largeImageURL}\">\n\n\n    <img class=\"gallery-item-image\" alt=\"${alt}\" src=\"${previewUrl}\"/>\n    <div class=\"gallery-item-details-container\">\n      ${imageDetails.map(imgDetail => renderDetailsElement(imgDetail.label, pictureItem[imgDetail.field])).join('')}\n    </div>\n\n    </a>`;\n}\n\nfunction renderDetailsElement(label, value) {\n  return `\n    <div class=\"gallery-item-details-element\">\n      <span class=\"label\">${label}</span>\n      <span class=\"value\">${value}</span>\n    </div>`;\n}\n","import 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport { getPictures } from './js/pixabay-api.js';\nimport { setLoadingText, renderGalleryItems } from './js/render-functions.js';\n\nconst searchForm = document.getElementById('search-form');\n\nconst galleryViewer = new SimpleLightbox('.gallery-item', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  fadeSpeed: 1000,\n});\n\nfunction startSearch(query) {\n  setLoadingText('Loading images, please wait...');\n\n  getPictures(query)\n    .then(pictures => {\n      renderGalleryItems(pictures);\n      galleryViewer.refresh();\n\n      if (pictures.length === 0) {\n        iziToast.error({\n          message: `Sorry, there are no images matching your search query. Please try again!`,\n          position: 'topRight',\n          iconColor: '#FFF',\n          titleColor: '#FFF',\n          messageColor: '#FFF',\n          backgroundColor: '#EF4040',\n          progressBarColor: '#B51B1B',\n        });\n      }\n    })\n    .catch(() => {\n      renderGalleryItems([]);\n      iziToast.error({\n        message: `Request failed, please try again later`,\n        position: 'topRight',\n        iconColor: '#FFF',\n        titleColor: '#FFF',\n        messageColor: '#FFF',\n        backgroundColor: '#EF4040',\n        progressBarColor: '#B51B1B',\n      });\n    });\n}\n\nfunction handleSearchSubmit(event) {\n  event.preventDefault();\n  const formData = new FormData(searchForm);\n  const formValues = Object.fromEntries(formData);\n  startSearch(formValues.query);\n}\n\nfunction init() {\n  searchForm.addEventListener('submit', handleSearchSubmit);\n}\n\ninit();\n"],"names":["searchKey","defaultImageType","defaultOrientation","enableSafeSearch","baseApiUrl","getPictures","query","search","getSearchParams","url","response","responseBody","galleryContainer","imageDetails","setLoadingText","loadingText","renderGalleryItems","pictureItems","renderPictureItem","pictureItem","previewUrl","largeImageURL","alt","imgDetail","renderDetailsElement","label","value","searchForm","galleryViewer","SimpleLightbox","startSearch","pictures","iziToast","handleSearchSubmit","event","formData","formValues","init"],"mappings":"6vBAAA,MAAMA,EAAY,qCACZC,EAAmB,QACnBC,EAAqB,aACrBC,EAAmB,GAEnBC,EAAa,2BAEZ,SAASC,EAAYC,EAAO,CACjC,MAAMC,EAASC,EAAgBF,CAAK,EAAE,SAAU,EAC1CG,EAAM,GAAGL,CAAU,IAAIG,CAAM,GAEnC,OAAO,MAAME,CAAG,EACb,KAAKC,GAAYA,EAAS,KAAM,CAAA,EAChC,KAAKC,IAAgBA,GAAA,YAAAA,EAAc,OAAQ,CAAA,CAAE,CAClD,CAEA,SAASH,EAAgBF,EAAO,CAC9B,OAAO,IAAI,gBAAgB,CACzB,EAAGA,EACH,IAAKN,EACL,WAAYC,EACZ,YAAaC,EACb,WAAYC,CAChB,CAAG,CACH,CCxBA,MAAMS,EAAmB,SAAS,cAAc,UAAU,EAEpDC,EAAe,CACnB,CAAE,MAAO,QAAS,MAAO,OAAS,EAClC,CAAE,MAAO,QAAS,MAAO,OAAS,EAClC,CAAE,MAAO,WAAY,MAAO,UAAY,EACxC,CAAE,MAAO,YAAa,MAAO,WAAa,CAC5C,EAEO,SAASC,EAAeC,EAAa,CAC1CH,EAAiB,UAAYG,CAC/B,CAEO,SAASC,EAAmBC,EAAc,CAC/C,QAAQ,IAAIA,CAAY,EACxBL,EAAiB,UAAYK,EAAa,IAAIC,CAAiB,EAAE,KAAK,EAAE,CAC1E,CAEA,SAASA,EAAkBC,EAAa,CACtC,MAAMC,EAAaD,EAAY,WACzBE,EAAgBF,EAAY,cAC5BG,EAAMH,EAAY,KACxB,MAAO;AAAA,oCAC2BE,CAAa;AAAA;AAAA;AAAA,2CAGNC,CAAG,UAAUF,CAAU;AAAA;AAAA,QAE1DP,EAAa,IAAIU,GAAaC,EAAqBD,EAAU,MAAOJ,EAAYI,EAAU,KAAK,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA;AAAA,SAInH,CAEA,SAASC,EAAqBC,EAAOC,EAAO,CAC1C,MAAO;AAAA;AAAA,4BAEmBD,CAAK;AAAA,4BACLC,CAAK;AAAA,WAEjC,CCjCA,MAAMC,EAAa,SAAS,eAAe,aAAa,EAElDC,EAAgB,IAAIC,EAAe,gBAAiB,CACxD,aAAc,MACd,aAAc,IACd,UAAW,GACb,CAAC,EAED,SAASC,EAAYxB,EAAO,CAC1BQ,EAAe,gCAAgC,EAE/CT,EAAYC,CAAK,EACd,KAAKyB,GAAY,CAChBf,EAAmBe,CAAQ,EAC3BH,EAAc,QAAS,EAEnBG,EAAS,SAAW,GACtBC,EAAS,MAAM,CACb,QAAS,2EACT,SAAU,WACV,UAAW,OACX,WAAY,OACZ,aAAc,OACd,gBAAiB,UACjB,iBAAkB,SAC5B,CAAS,CAEJ,CAAA,EACA,MAAM,IAAM,CACXhB,EAAmB,CAAA,CAAE,EACrBgB,EAAS,MAAM,CACb,QAAS,yCACT,SAAU,WACV,UAAW,OACX,WAAY,OACZ,aAAc,OACd,gBAAiB,UACjB,iBAAkB,SAC1B,CAAO,CACP,CAAK,CACL,CAEA,SAASC,EAAmBC,EAAO,CACjCA,EAAM,eAAgB,EACtB,MAAMC,EAAW,IAAI,SAASR,CAAU,EAClCS,EAAa,OAAO,YAAYD,CAAQ,EAC9CL,EAAYM,EAAW,KAAK,CAC9B,CAEA,SAASC,GAAO,CACdV,EAAW,iBAAiB,SAAUM,CAAkB,CAC1D,CAEAI,EAAM"}